!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).stylefire={})}(this,function(t){"use strict";var o=function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function y(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]])}return r}var l=function(){};"production"!==process.env.NODE_ENV&&(l=function(t,e){if(!t)throw new Error(e)});var e,r,n=0,i="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),r=Math.max(0,16.7-(e-n));n=e+r,setTimeout(function(){return t(n)},r)};(r=e=e||{}).Read="read",r.Update="update",r.Render="render",r.PostRender="postRender",r.FixedUpdate="fixedUpdate";function a(t){return h=t}function u(t){return w[t].process(g)}function s(t){var r=t.onRead,e=t.onRender,n=t.uncachedValues,f=void 0===n?new Set:n,o=t.useCache,d=void 0===o||o;return function(t){void 0===t&&(t={});var n=y(t,[]),o={},i=[],a=!1;function u(t,e){t.startsWith("--")&&(n.hasCSSVariable=!0);var r=o[t];o[t]=e,o[t]!==r&&(-1===i.indexOf(t)&&i.push(t),a||(a=!0,O.render(s.render)))}var s={get:function(t,e){return void 0===e&&(e=!1),!e&&d&&!f.has(t)&&void 0!==o[t]?o[t]:r(t,n)},set:function(t,e){if("string"==typeof t)u(t,e);else for(var r in t)u(r,t[r]);return this},render:function(t){return void 0===t&&(t=!1),!a&&!0!==t||(e(o,n,i),a=!1,i.length=0),this}};return s}}function f(t,e){return M.set(t,k(e))}var d,c=1/60*1e3,p=!0,h=!1,v=!1,g={delta:0,timestamp:0},m=[e.Read,e.Update,e.Render,e.PostRender],b=m.reduce(function(t,e){var n=function(n){var i=[],a=[],u=0,s=!1,o=0,f=new WeakSet,d=new WeakSet,c={cancel:function(t){var e=a.indexOf(t);f.add(t),-1!==e&&a.splice(e,1)},process:function(t){var e,r;if(s=!0,i=(e=[a,i])[0],(a=e[1]).length=0,u=i.length)for(o=0;o<u;o++)(r=i[o])(t),!0!==d.has(r)||f.has(r)||(c.schedule(r),n(!0));s=!1},schedule:function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=!1),l("function"==typeof t,"Argument must be a function");var n=r&&s,o=n?i:a;f.delete(t),e&&d.add(t),-1===o.indexOf(t)&&(o.push(t),n&&(u=i.length))}};return c}(a);return t.sync[e]=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),h||S(),n.schedule(t,e,r),t},t.cancelSync[e]=function(t){return n.cancel(t)},t.steps[e]=n,t},{steps:{},sync:{},cancelSync:{}}),w=b.steps,O=b.sync,x=(b.cancelSync,function(t){h=!1,g.delta=p?c:Math.max(Math.min(t-g.timestamp,40),1),p||(c=g.delta),g.timestamp=t,v=!0,m.forEach(u),v=!1,h&&(p=!1,i(x))}),S=function(){p=h=!0,v||i(x)},R=/([a-z])([A-Z])/g,k=function(t){return t.replace(R,"$1-$2").toLowerCase()},C=new Map,M=new Map,T=["Webkit","Moz","O","ms",""],L=T.length,W="undefined"!=typeof document,A=function(t,e){void 0===e&&(e=!1);var r=e?M:C;return r.has(t)||(W?function(t){d=d||document.createElement("div");for(var e=0;e<L;e++){var r=T[e],n=""===r,o=n?t:r+t.charAt(0).toUpperCase()+t.slice(1);(o in d.style||n)&&(C.set(t,o),f(t,(n?"":"-")+k(o)))}}(t):function(t){f(t,t)}(t)),r.get(t)||t},E=["","X","Y","Z"],P=["translate","scale","rotate","skew","transformPerspective"].reduce(function(t,r){return E.reduce(function(t,e){return t.push(r+e),t},t)},["x","y","z"]),X=P.reduce(function(t,e){return t[e]=!0,t},{});function Y(t){return!0===X[t]}function j(t,e){return P.indexOf(t)-P.indexOf(e)}var B=new Set(["originX","originY","originZ"]);function V(e,r){return function(t){return Math.max(Math.min(t,r),e)}}function z(t){return t%1?Number(t.toFixed(5)):t}function Z(e){return{test:function(t){return"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}}function F(t){return void 0!==t.red}function N(t){return void 0!==t.hue}function H(o){return function(t){if("string"!=typeof t)return t;for(var e={},r=function(t){return t.substring(t.indexOf("(")+1,t.lastIndexOf(")"))}(t).split(/,\s*/),n=0;n<4;n++)e[o[n]]=void 0!==r[n]?parseFloat(r[n]):1;return e}}var U=function(){return(U=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},I=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,q={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},D=U({},q,{transform:V(0,1)}),_=U({},q,{default:1}),G=Z("deg"),$=Z("%"),J=Z("px"),K=U({},$,{parse:function(t){return $.parse(t)/100},transform:function(t){return $.transform(100*t)}}),Q=V(0,255),tt=U({},q,{transform:function(t){return Math.round(Q(t))}});function et(t,e){return t.startsWith(e)&&I.test(t)}var rt={test:function(t){return"string"==typeof t?et(t,"rgb"):F(t)},parse:H(["red","green","blue","alpha"]),transform:function(t){var e=t.red,r=t.green,n=t.blue,o=t.alpha;return function(t){var e=t.red,r=t.green,n=t.blue,o=t.alpha;return"rgba("+e+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({red:tt.transform(e),green:tt.transform(r),blue:tt.transform(n),alpha:z(o)})}},nt={test:function(t){return"string"==typeof t?et(t,"hsl"):N(t)},parse:H(["hue","saturation","lightness","alpha"]),transform:function(t){var e=t.hue,r=t.saturation,n=t.lightness,o=t.alpha;return function(t){var e=t.hue,r=t.saturation,n=t.lightness,o=t.alpha;return"hsla("+e+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({hue:Math.round(e),saturation:$.transform(z(r)),lightness:$.transform(z(n)),alpha:z(o)})}},ot=U({},rt,{test:function(t){return"string"==typeof t&&et(t,"#")},parse:function(t){var e="",r="",n="";return 4<t.length?(e=t.substr(1,2),r=t.substr(3,2),n=t.substr(5,2)):(e=t.substr(1,1),r=t.substr(2,1),n=t.substr(3,1),e+=e,r+=r,n+=n),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),it={test:function(t){return"string"==typeof t&&I.test(t)||F(t)||N(t)},parse:function(t){return rt.test(t)?rt.parse(t):nt.test(t)?nt.parse(t):ot.test(t)?ot.parse(t):t},transform:function(t){return F(t)?rt.transform(t):N(t)?nt.transform(t):t}},at=o({},q,{transform:Math.round}),ut={color:it,backgroundColor:it,outlineColor:it,fill:it,stroke:it,borderColor:it,borderTopColor:it,borderRightColor:it,borderBottomColor:it,borderLeftColor:it,borderWidth:J,borderTopWidth:J,borderRightWidth:J,borderBottomWidth:J,borderLeftWidth:J,borderRadius:J,radius:J,borderTopLeftRadius:J,borderTopRightRadius:J,borderBottomRightRadius:J,borderBottomLeftRadius:J,width:J,maxWidth:J,height:J,maxHeight:J,size:J,top:J,right:J,bottom:J,left:J,padding:J,paddingTop:J,paddingRight:J,paddingBottom:J,paddingLeft:J,margin:J,marginTop:J,marginRight:J,marginBottom:J,marginLeft:J,rotate:G,rotateX:G,rotateY:G,rotateZ:G,scale:_,scaleX:_,scaleY:_,scaleZ:_,skew:G,skewX:G,skewY:G,distance:J,translateX:J,translateY:J,translateZ:J,x:J,y:J,z:J,perspective:J,opacity:D,originX:K,originY:K,originZ:J,zIndex:at,fillOpacity:D,strokeOpacity:D,numOctaves:at},st=function(t){return ut[t]},ft=function(t,e){return e&&"number"==typeof t?e.transform(t):t},dt="scrollLeft",ct="scrollTop",lt=new Set([dt,ct]),pt=new Set([dt,ct,"transform"]),ht={x:"translateX",y:"translateY",z:"translateZ"};function vt(t){return"function"==typeof t}function gt(t,e,r,n,o,i,a){void 0===e&&(e=!0),void 0===r&&(r={}),void 0===n&&(n={}),void 0===o&&(o={}),void 0===i&&(i=[]),void 0===a&&(a=!1);var u,s=!0,f=!1,d=!1;for(var c in t){var l=t[c],p=st(c),h=ft(l,p);Y(c)?(f=!0,n[c]=h,i.push(c),s&&(p.default&&l!==p.default||!p.default&&0!==l)&&(s=!1)):(u=c,B.has(u)?(o[c]=h,d=!0):pt.has(c)&&vt(h)||(r[A(c,a)]=h))}return!f&&"function"!=typeof t.transform||(r.transform=function(t,e,r,n,o){var i="",a=!1;r.sort(j);for(var u=r.length,s=0;s<u;s++){var f=r[s];i+=(ht[f]||f)+"("+e[f]+") ",a="z"===f||a}return!a&&o?i+="translateZ(0)":i=i.trim(),vt(t.transform)?i=t.transform(e,i):n&&(i="none"),i}(t,n,i,s,e)),d&&(r.transformOrigin=(o.originX||"50%")+" "+(o.originY||"50%")+" "+(o.originZ||0)),r}function mt(e,r){void 0===e&&(e=!0),void 0===r&&(r=!0);var n={},o={},i={},a=[];return function(t){return a.length=0,gt(t,e,n,o,i,a,r),n}}var yt=s({onRead:function(t,e){var r=e.element,n=e.preparseOutput,o=st(t);if(Y(t))return o&&o.default||0;if(lt.has(t))return r[t];var i=window.getComputedStyle(r,null).getPropertyValue(A(t,!0))||0;return n&&o&&o.test(i)&&o.parse?o.parse(i):i},onRender:function(t,e,r){var n=e.element,o=e.buildStyles,i=e.hasCSSVariable;if(Object.assign(n.style,o(t)),i)for(var a=r.length,u=0;u<a;u++){var s=r[u];s.startsWith("--")&&n.style.setProperty(s,t[s])}-1!==r.indexOf(dt)&&(n[dt]=t[dt]),-1!==r.indexOf(ct)&&(n[ct]=t[ct])},uncachedValues:lt});var bt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),wt=function(){return{style:{}}},Ot=function(t,e){return J.transform(t*e)},xt={x:0,y:0,width:0,height:0};function St(t,e,r){return"string"==typeof t?t:J.transform(e+r*t)}function Rt(t,e,r,n,o){void 0===e&&(e=xt),void 0===n&&(n=mt(!1,!1)),void 0===o&&(o=wt());var i=t.x,a=t.y,u=(t.z,t.originX),s=void 0===u?.5:u,f=t.originY,d=void 0===f?.5:f,c=t.pathLength,l=t.pathSpacing,p=void 0===l?1:l,h=t.pathOffset,v=void 0===h?0:h,g=n(y(t,["x","y","z","originX","originY","pathLength","pathSpacing","pathOffset"]));for(var m in g){if("transform"===m)o.style.transform=g[m];else o[bt.has(m)?m:k(m)]=g[m]}return void 0===s&&void 0===d||(o.style.transformOrigin=function(t,e,r){return St(e,t.x,t.width)+" "+St(r,t.y,t.height)}(e,s,d)),void 0!==i&&(o.x=i),void 0!==a&&(o.y=a),void 0!==r&&void 0!==c&&(o["stroke-dashoffset"]=Ot(-v,r),o["stroke-dasharray"]=Ot(c,r)+" "+Ot(p,r)),o}function kt(t){var e=function(t){try{return function(t){return"function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}(t)}catch(t){return{x:0,y:0,width:0,height:0}}}(t),r=function(t){return"path"===t.tagName}(t)?t.getTotalLength():void 0;return Ct({element:t,buildAttrs:function(e,r){var n=wt(),o=mt(!1,!1);return function(t){return Rt(t,e,r,o,n)}}(e,r)})}var Ct=s({onRead:function(t,e){var r=e.element;if(Y(t=bt.has(t)?t:k(t))){var n=st(t);return n?n.default:0}return r.getAttribute(t)},onRender:function(t,e){var r=e.element,n=(0,e.buildAttrs)(t);for(var o in n)"style"===o?Object.assign(r.style,n.style):r.setAttribute(o,n[o])}}),Mt=s({useCache:!1,onRead:function(t){return"scrollTop"===t?window.pageYOffset:window.pageXOffset},onRender:function(t){var e=t.scrollTop,r=void 0===e?0:e,n=t.scrollLeft,o=void 0===n?0:n;return window.scrollTo(o,r)}}),Tt=function(){};"production"!==process.env.NODE_ENV&&(Tt=function(t,e){if(!t)throw new Error(e)});function Lt(t,e){var r;return t instanceof HTMLElement?r=function(t,e){void 0===e&&(e={});var r=e.enableHardwareAcceleration,n=y(e,["enableHardwareAcceleration"]);return yt(o({element:t,buildStyles:mt(r),preparseOutput:!0},n))}(t,e):t instanceof SVGElement?r=kt(t):t===window&&(r=Mt(t)),Tt(void 0!==r,"No valid node provided. Node must be HTMLElement, SVGElement or window."),Wt.set(t,r),r}var Wt=new WeakMap;t.buildSVGAttrs=Rt,t.buildStyleProperty=gt,t.createStylerFactory=s,t.default=function(t,e){return function(t,e){return Wt.has(t)?Wt.get(t):Lt(t,e)}("string"==typeof t?document.querySelector(t):t,e)},t.isTransformProp=Y,Object.defineProperty(t,"__esModule",{value:!0})});
